/*
* Infragistics.Web.MobileUI Rating 12.2.20122.1021
*
* Copyright (c) 2011-2012 Infragistics Inc.
*
* http://www.infragistics.com/
*
* Depends on: 
*  jquery-1.6.4.js
 *  jquery.mobile-1.0.1.js
*/
(function(a){var b=function(d){return d===null||d===undefined||(typeof d==="number"&&isNaN(d))};a.widget("mobile.igRating",a.mobile.widget,{options:{value:null,voteCount:5,voteWidth:0,voteHeight:0,readOnly:false,inputName:null},css:{normal:"ui-igrating ui-state-default ui-widget-content",selected:"ui-igrating-selected ui-state-highlight",vote:"ui-igrating-vote ui-icon ui-icon-star",voteSelected:"ui-igrating-voteselected",voteReadOnly:"ui-igrating-votereadonly",voteReadOnlySelected:"ui-igrating-votereadonlyselected",voteHover:"ui-igrating-votehover",hovered:"ui-igrating-hovered"},events:{hoverChange:null,valueChange:null},_create:function(){var e,l,d,g,k={fontSize:"1px",width:"100%",height:"100%",position:"relative",overflow:"hidden"},j=this.options,h=this.element,i=this,f=this.css;e=this._count(j);l=h[0].style;i._old={width:l.width,height:l.height,html:h[0].innerHTML};i._swap=h.css("direction")==="rtl";g=i._elem=a("<div/>").css(k).addClass(f.normal).appendTo(h);d=a("<div/>").css(k).appendTo(g);i._doVotes(j,d);i._val=i._toNum(j.value);i._doVal(i._val);i._skip=0;g.bind(i._evts={click:function(m){if(--i._skip<=0){i._doEvt(m,1)}},mouseup:function(m){if(--i._skip<=0){i._doEvt(m,1);i._skip=2}},mousemove:function(m){if(!a.support.touch){i._doEvt(m,2)}},vmouseout:function(m){i._lastHov=null;i._doEvt(m,3)},swipeleft:function(m){i._skip=2;i._doEvt(m,!i._swap?4:5)},swiperight:function(m){i._skip=2;i._doEvt(m,i._swap?4:5)}})},_toNum:function(d){if(!d){return 0}return(isNaN(d)||d<0)?0:d},_count:function(d){d=parseInt(d.voteCount,10);return isNaN(d)?5:Math.max(d,1)},_doVotes:function(t,e){var u,q,j,p,y,k,v,h,x=e,f=this._count(t),w={width:"100%",height:"100%"},d={left:"0px",top:"0px",position:"absolute",overflow:"hidden",border:"none",background:"none",whiteSpace:"nowrap"},r=-1,s=this,g=this.css,l=this._elem,m=this.element;if(!e){e=s._div.parent();s._div.remove();s._hov.remove();s._sel.remove();s._selSwap=s._hovSwap=null}k=s._div=a("<div/>").addClass(g.vote).css(d).appendTo(e);if(t.readOnly){k.addClass(g.voteReadOnly)}p=parseInt(t.voteHeight,10);y=parseInt(t.voteWidth,10);if(isNaN(p)||p<2){p=k.css("height");p=(!p||p.indexOf("px")<1)?16:parseInt(p,10)}if(isNaN(y)||y<2){y=k.css("width");y=(!y||y.indexOf("px")<1)?16:parseInt(y,10)}k.removeClass(g.vote).removeClass(g.voteReadOnly);u=s._sel=a("<div/>").addClass(g.selected).css(w).css(d).appendTo(e);if(!a.support.touch){q=s._hov=a("<div/>").addClass(g.hovered).css(w).css(d).css("visibility","hidden").appendTo(e)}if(s._swap){if(!a.support.touch){s._hovSwap=q=a("<div/>").css(w).appendTo(s._hov)}s._selSwap=u=a("<div/>").css(w).appendTo(s._sel)}j={display:"inline-block",width:y,height:p,textIndent:"0px",overflow:"visible"};while(++r<f){v=a("<span />").addClass(g.vote).css(j).appendTo(k);if(t.readOnly){v.addClass(g.voteReadOnly)}h=t.cssVotes?t.cssVotes[r]:null;if(h&&h[0]){v.addClass(h[0])}v[0]._i=r;v=a("<span />").addClass(g.vote).addClass(g.voteSelected).css(j).appendTo(u);if(t.readOnly){v.addClass(g.voteReadOnlySelected)}if(h&&h[1]){v.addClass(h[1])}v[0]._i=r;if(s._swap&&!s._selSwap){s._selSwap=v}if(q){v=a("<span />").addClass(g.vote).addClass(g.voteHover).css(j).appendTo(q);if(h&&h[2]){v.addClass(h[2])}v[0]._i=r;if(s._swap&&!s._hovSwap){s._hovSwap=v}}}s._size=y;y*=f;l.css({height:p+"px",width:y+"px"});try{p+=((r=Math.max(l.outerHeight()-l.innerHeight(),0))>10)?2:r;y+=((r=Math.max(l.outerWidth()-l.innerWidth(),0))>10)?2:r}catch(n){}m.css({height:p+"px",width:y+"px"});k.css(w);if(!x){s.value(s.value())}},_doEvt:function(d,g){var h,e=this,f=this.options;if(f.readOnly||!e._sel){return}if(g===5){if(e._hov){e._hasHov=false;e._hov[0].style.visibility="hidden"}e._doVal(e._count(f),d,false);return}if(g===4){if(e._hov){e._hasHov=false;e._hov[0].style.visibility="hidden"}e._doVal(0,d,false);return}if(g===3){if(!e._hov){return}e._hasHov=false;e._hov[0].style.visibility="hidden";return}h=e._valFromEvt(d);if(h<0){return}if(g===1){if(!e._sel){return}if(e._hov){h=e._lastHov||h}if(h){e._doVal(h,d,false);if(e._hov){e._doVal(h,d,1)}}}if(g===2){if(!e._hov){return}e._lastHov=h;if(!e._hasHov){e._hasHov=true}e._hov[0].style.visibility="visible";e._doVal(h,d,1)}d.preventDefault()},_setOption:function(e,g){var d,f=this.options;if(f[e]===g){return}d=this._count(f);f[e]=g;if(e.indexOf("vote")===0||e==="readOnly"){this._doVotes(f)}if(e.indexOf("value")>=0){this._doVal(g,e.length>6)}},_evtOffset:function(d){var g,e=d.originalEvent||d,f="offsetX";if(b(g=d[f])){if(b(g=e[f])){if(b(g=d[f="layerX"])){g=e[f]}}}return g},_valFromEvt:function(e){var k,f,m,j,g,l=e?e.target:null,h=this.options,d=this._count(h);g=(l&&l.nodeName==="SPAN")?l._i:null;if(g===null||g===undefined){return -1}if(!l.unselectable){l.unselectable="on"}j=this._evtOffset(e);if((e.originalEvent&&e.originalEvent.type.indexOf("touch")!==-1)||(e.type.indexOf("touch")!==-1)){if(j<=0){j+=e.clientX+0.05}if(j<=0||isNaN(j)){if(isNaN(j)){j=e.clientX-a(l.parentNode).offset().left}else{j=e.clientX-this._size+0.05}}if(this._swap){f=parseInt(l.parentNode.style.marginLeft.replace("px",""),10);if(isNaN(f)){f=0}j-=f}}else{k=this._size;f=-1*parseInt(l.parentNode.style.marginLeft.replace("px",""),10);if(isNaN(f)){f=0}if(this._swap){j+=f}k*=this._swap?d-g-1:g;f=-(l.offsetLeft);if(this._swap){j-=f}if(this._swap&&a.browser.mozilla&&f<k){j+=f}if(k>j&&!this._swap){j+=k}j+=0.05}m=this._swap?Math.floor(j/this._size):Math.ceil(j/this._size);if(this._swap){m=d-m}return Math.max(Math.min(m,d),0)},_doVal:function(m,e,f){var d,i=this.options,k=f?this._hov:this._sel,j=this._size,l=this._swap?(f?this._hovSwap:this._selSwap):null,g,h;if(k){k=k[0];if(k){k=k.style}}if(!k){return}d=this._count(i);if(isNaN(m)){m=-1}if(e&&e.type){if((f?this._valH:this._val)===m||!this._trigger(f?"hoverChange":"valueChange",e,{value:m,oldValue:f?this._valH:this._val})){return}}if(f){this._valH=m}else{this._val=i.value=m;g=i.inputName;if(g){h=a('input[name="'+g+'"]');if(h.length===0){h=a('<input type="hidden" name="'+g+'" />').appendTo(this.element.parent())}h.val(m)}}if(l){m=d-m}m=i.readOnly?Math.round(m*2)/2:Math.round(m);m=Math.floor(m*j+0.3);m+="px";if(l){l=l[0];if(l){l=l.style}}if(l){k.left=m;l.marginLeft="-"+m}else{k.width=m}},value:function(d){if(typeof d!=="number"){return this._val}this._doVal(d,false);return this},destroy:function(){var f=this._old,d=this.element;if(!this._elem){return this}this._elem.remove();d[0].style.width=f.width;d[0].style.height=f.height;d[0].innerHTML=f.html;a.Widget.prototype.destroy.apply(this,arguments);this._elem=this._sel=this._selSwap=this._hov=this._hovSwap=this._evts=null;return this}});function c(d){var f=document;if(d){f=d.target}a.each(a(f).find(":jqmData(role='igrating')"),function(e,g){a(g).igRating(a(g).jqmData())})}if(a.ig&&a.ig.loader){a.ig.loader().preinit(c)}a(document).bind("pagecreate create",c);a.extend(a.mobile.igRating,{version:"12.2.20122.1021"})}(jQuery));(function(a){a(document).ready(function(){var b=a("#__ig_wm__").length>0?a("#__ig_wm__"):a('<div id="__ig_wm__"></div>').appendTo(document.body);b.css({position:"fixed",bottom:0,right:0,zIndex:1000}).addClass("ui-igtrialwatermark")})}(jQuery));